<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>econstitucional | CPE Bolivia 2009</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="css/styles.css" rel="stylesheet">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="#">
                <i class="bi bi-box me-2"></i>
                <span>econstitucional</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#articulos"><i class="bi bi-book me-1"></i>Artículos CPE</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#acerca"><i class="bi bi-info-circle me-1"></i>Acerca de</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Articles Section (Main Content) -->
    <section id="articulos" class="main-section">
        <div class="container">
            <div class="text-center mb-4">
                <h1 class="section-title">CPE Bolivia 2009</h1>
                <p class="section-subtitle">Explora los artículos de la Constitución Política del Estado</p>
            </div>

            <!-- Search and Filter -->
            <div class="row mb-4">
                <div class="col-lg-8 mx-auto">
                    <div class="search-box mb-3">
                        <span class="search-icon"><i class="bi bi-search"></i></span>
                        <input type="text" id="articleSearch" placeholder="Buscar artículo por número o tema...">
                    </div>
                    <!-- Temáticas Filter -->
                    <div id="tematicasFilter" class="d-flex flex-wrap gap-2 justify-content-center">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Articles Stats -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="d-flex justify-content-center gap-3 flex-wrap">
                        <span class="badge bg-primary p-2"><i class="bi bi-file-text me-1"></i><span id="totalArticles">0</span> Artículos</span>
                        <span class="badge bg-success p-2"><i class="bi bi-check-circle me-1"></i><span id="articlesWithAnalysis">0</span> Con Análisis</span>
                    </div>
                </div>
            </div>

            <!-- Articles Grid -->
            <div class="row g-3" id="articlesGrid">
                <div class="col-12 text-center py-5">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Cargando...</span>
                    </div>
                    <p class="text-muted mt-2">Cargando artículos...</p>
                </div>
            </div>

            <!-- Load More -->
            <div class="text-center mt-4" id="loadMoreContainer" style="display: none;">
                <button class="btn btn-outline-primary" id="loadMoreBtn">
                    <i class="bi bi-arrow-down-circle me-2"></i>Cargar más artículos
                </button>
            </div>
        </div>
    </section>

    <!-- Article Detail Modal -->
    <div class="modal fade" id="articleModal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="articleModalTitle">Artículo</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="articleModalBody">
                    <div class="text-center py-5">
                        <div class="spinner-border text-primary" role="status"></div>
                    </div>
                </div>
                <div class="modal-footer justify-content-start">
                    <button type="button" class="btn btn-primary" id="askAboutArticle">
                        <i class="bi bi-chat-dots me-2"></i>Preguntar al asistente
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- About Section -->
    <section id="acerca" class="py-5 bg-light">
        <div class="container">
            <div class="row">
                <div class="col-lg-10 mx-auto">
                    <h2 class="fw-bold mb-4 text-center">Sobre este Proyecto</h2>

                    <!-- La Constitución como Texto -->
                    <div class="about-block mb-4">
                        <h5 class="text-primary"><i class="bi bi-layers me-2"></i>La Constitución como Tejido</h5>
                        <p>La Constitución Política del Estado es un tejido de posibilidades con fuerza performativa. No es una colección de órdenes de cumplimiento inmediato, sino una combinación de materiales constitucionales que convoca archivos, instrumentos internacionales de derechos humanos, derecho comunitario y las normas propias de las naciones y pueblos indígena originario campesinos.</p>
                    </div>

                    <!-- Multiplicidad Textual -->
                    <div class="about-block mb-4">
                        <h5 class="text-primary"><i class="bi bi-box-seam me-2"></i>Multiplicidad Textual</h5>
                        <p>Los constituyentes empacaron en la CPE derechos, instituciones, valores, principios y complejidades. Este proyecto busca desempacar cada artículo analizando los archivos del proceso constituyente, la historia constitucional boliviana, instrumentos de derechos humanos, doctrina, jurisprudencia y las categorías políticas y jurídicas que respiran en cada artículo.</p>
                    </div>

                    <!-- Despliegue Constitucional -->
                    <div class="about-block mb-4">
                        <h5 class="text-primary"><i class="bi bi-diagram-3 me-2"></i>Despliegue Constitucional</h5>
                        <p>Leer la Constitución es siempre un despliegue, un abrir el texto a su multitextualidad. Detrás de cada uno de los 411 artículos se abren los pliegues de la Constitución, construida y reconstruida constantemente en su aplicación, interpretación y búsqueda de significaciones.</p>
                    </div>

                    <!-- Método -->
                    <div class="about-block mb-4">
                        <h5 class="text-primary"><i class="bi bi-compass me-2"></i>Método de Despliegue</h5>
                        <ul class="method-list">
                            <li><strong>Intertextualidad:</strong> Observar cómo un artículo es invadido por otros artículos, términos y categorías de la Constitución.</li>
                            <li><strong>Exterior constitutivo:</strong> Convocar los archivos del proceso constituyente y la tradición constitucional.</li>
                            <li><strong>Pluralidad interpretativa:</strong> Abrir la interpretación sin cerrarla hacia un significado final.</li>
                            <li><strong>Densidad histórica:</strong> Desde el primer Decreto de 1825 hasta las reformas recientes.</li>
                            <li><strong>Vida cotidiana:</strong> Acercar la Constitución donde sus preceptos deben causar efecto.</li>
                        </ul>
                    </div>

                    <!-- Invitación -->
                    <div class="about-block text-center p-4 bg-white rounded shadow-sm">
                        <p class="lead mb-0"><em>Esta es una invitación a recorrer la norma fundamental del Estado boliviano, a encontrar en ella las condiciones de posibilidad para una pluralidad de justicias que están aún pendientes.</em></p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-4 text-white text-center">
        <div class="container">
            <p class="mb-0"><small>econstitucional © <span id="currentYear"></span></small></p>
        </div>
    </footer>

    <!-- Chat Backdrop -->
    <div class="chat-backdrop" id="chatBackdrop"></div>

    <!-- Fixed Chat Widget -->
    <div class="chat-widget" id="chatWidget">
        <!-- Chat Toggle Button -->
        <button class="chat-toggle-btn" id="chatToggleBtn">
            <i class="bi bi-chat-dots"></i>
            <span class="chat-badge" id="chatBadge" style="display: none;">1</span>
        </button>

        <!-- Chat Window -->
        <div class="chat-window" id="chatWindow">
            <div class="chat-header">
                <div class="chat-header-info">
                    <i class="bi bi-robot"></i>
                    <span>Asistente IA</span>
                </div>
                <button class="chat-close-btn" id="chatCloseBtn">
                    <i class="bi bi-x-lg"></i>
                </button>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="message assistant-message">
                    <div class="message-content">
                        <p>¡Hola! Soy tu asistente de la CPE Bolivia. ¿En qué puedo ayudarte?</p>
                    </div>
                </div>
            </div>
            <div class="chat-input-area">
                <form id="chatForm">
                    <div class="chat-input-wrapper">
                        <textarea
                            id="userInput"
                            placeholder="Escribe tu pregunta..."
                            rows="1"
                            autocomplete="off"></textarea>
                        <button type="submit" id="sendBtn">
                            <i class="bi bi-send"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="js/app.js"></script>
</body>
</html>
